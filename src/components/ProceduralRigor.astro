---
import ContentHeader from "./ui-kit/ContentHeader.astro";
import SimpleCard from "./ui-kit/SimpleCard.astro";
---

<section class="procedural-rigor">
  <div class="container">
    <ContentHeader
      eyebrow="Notre posture"
      title="Rigueur Procédurale"
      titleSecondLine="Socle d'Intervention"
      description={[
        "La pratique du cabinet VINDEX est fondée sur une maîtrise exigeante de la procédure civile et de la procédure d'appel.",
        "Chaque intervention repose sur une analyse rigoureuse des textes applicables, de la jurisprudence récente et des contraintes procédurales propres à chaque dossier, dans un objectif constant de sécurité juridique.",
      ]}
    />

    <div class="rigor-grid">
      <!-- <SimpleCard
        icon="/conformite.webp"
        title="Conformité"
        description="Analyse systématique de la recevabilité pour garantir 100% de sécurité procédurale."
        alt="Icone Conformité"
      /> -->

      <SimpleCard
        icon="/deadline.webp"
        title="Délais"
        description="Gestion proactive du calendrier et anticipation des échéances critiques."
        alt="Icone Délais"
      />

      <SimpleCard
        icon="/security.webp"
        title="Sécurité"
        description="Veille juridique constante pour une stratégie à l'épreuve des évolutions."
        alt="Icone Sécurité"
      />

      <SimpleCard
        icon="/strategy.webp"
        title="Stratégie"
        description="Vision globale du contentieux intégrant les risques et les opportunités d'appel."
        alt="Icone Stratégie"
      />
    </div>
  </div>
</section>

<style>
  .procedural-rigor {
    padding: 128px 24px;
    background-color: #fafafa;
  }

  .container {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0;
  }

  .rigor-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-top: 64px;
  }

  @media (max-width: 1024px) {
    .rigor-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
  }

  @media (max-width: 768px) {
    .procedural-rigor {
      padding: 64px 16px;
    }

    .rigor-grid {
      grid-template-columns: 1fr;
      margin-top: 48px;
    }
  }
</style>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const section = document.querySelector(".procedural-rigor");
  const grid = section?.querySelector(".rigor-grid");
  const cards = section?.querySelectorAll(".simple-card");

  // Staggered y offsets for 4 cards
  const offsets = [48, 96, 144, 192];

  if (grid && cards) {
    cards.forEach((card, index) => {
      const yOffset = offsets[index] || 64;

      gsap.fromTo(
        card,
        {
          y: yOffset,
        },
        {
          y: 0,
          ease: "none",
          scrollTrigger: {
            trigger: grid,
            start: "top 95%",
            end: "top 30%",
            scrub: true,
          },
        },
      );
    });
  }
</script>
