---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import ContentHeader from "../../components/ui-kit/ContentHeader.astro";
import FinalCTA from "../../components/FinalCTA.astro";
import Footer from "../../components/Footer.astro";
import Button from "../../components/ui-kit/Button.astro";
import { ArrowLeft } from "lucide-astro";

// Demo articles data for static paths
const articlesData = {
  "jurisprudence-photovoltaique-2026": {
    title: "Jurisprudence photovoltaïque : les apports de la Cour de cassation",
    date: "15 janv. 2026",
    category: "Jurisprudence",
    content: `
      <p>L'année 2025 a été marquée par plusieurs arrêts significatifs de la Cour de cassation 
      en matière de contentieux photovoltaïque. Ces décisions viennent préciser les conditions 
      de mise en œuvre de la responsabilité des établissements de crédit et les conséquences 
      de l'annulation des contrats interdépendants.</p>
      
      <h2>La faute de la banque dans le déblocage des fonds</h2>
      <p>La Cour de cassation a rappelé que l'établissement de crédit qui débloque les fonds 
      avant l'achèvement complet de l'installation et sa mise en service commet une faute 
      de nature à le priver de son droit à restitution du capital prêté.</p>
      
      <h2>L'interdépendance des contrats</h2>
      <p>La jurisprudence confirme que l'annulation du contrat de vente entraîne de plein 
      droit l'anéantissement du contrat de crédit affecté, conformément aux dispositions 
      de l'article L. 312-55 du Code de la consommation.</p>
      
      <h2>Les obligations d'information</h2>
      <p>Les décisions de 2025 ont également renforcé l'exigence de clarté des bons de commande, 
      sanctionnant les manquements aux obligations d'information précontractuelle par la nullité 
      du contrat.</p>
    `,
  },
  "procedure-participative-appel": {
    title: "La convention de procédure participative en appel",
    date: "8 janv. 2026",
    category: "Analyse",
    content: `
      <p>La convention de procédure participative reste un outil méconnu et sous-utilisé 
      dans le cadre de la procédure d'appel. Pourtant, ses avantages sont nombreux et 
      permettent de sécuriser efficacement les procédures contentieuses.</p>
      
      <h2>Un effet interruptif précieux</h2>
      <p>L'un des principaux atouts de la convention de procédure participative réside 
      dans son effet interruptif sur les délais de prescription et de forclusion. 
      En appel, cet effet permet de suspendre le cours des délais Magendie.</p>
      
      <h2>Une mise en état conventionnelle</h2>
      <p>Les parties peuvent organiser une véritable mise en état conventionnelle, 
      définissant elles-mêmes le calendrier des échanges et la durée de la négociation.</p>
      
      <h2>Vers une généralisation de l'outil ?</h2>
      <p>Face à l'engorgement des juridictions et à la complexité croissante des litiges, 
      la convention de procédure participative pourrait connaître un essor significatif 
      dans les années à venir.</p>
    `,
  },
  "delais-magendie-vigilance": {
    title: "Délais Magendie : points de vigilance stratégiques",
    date: "2 janv. 2026",
    category: "Procédure",
    content: `
      <p>La procédure d'appel est encadrée par des délais stricts, dont le non-respect 
      est lourdement sanctionné. Rappel des principaux points de vigilance pour 2026.</p>
      
      <h2>Les délais de conclusion</h2>
      <p>L'appelant dispose de trois mois à compter de la déclaration d'appel pour 
      conclure. L'intimé dispose ensuite de trois mois pour répliquer. Le non-respect 
      de ces délais est sanctionné par la caducité ou l'irrecevabilité.</p>
      
      <h2>La communication des pièces</h2>
      <p>Les pièces doivent être communiquées simultanément avec les conclusions. 
      La communication tardive peut entraîner le rejet des pièces et fragiliser 
      l'ensemble du dossier.</p>
      
      <h2>L'importance du RPVA</h2>
      <p>Tous les actes de procédure doivent être accomplis par voie électronique 
      via le RPVA. Les dysfonctionnements techniques ne constituent pas une excuse 
      valable en cas de dépassement des délais.</p>
    `,
  },
};

export function getStaticPaths() {
  return [
    { params: { slug: "jurisprudence-photovoltaique-2026" } },
    { params: { slug: "procedure-participative-appel" } },
    { params: { slug: "delais-magendie-vigilance" } },
  ];
}

const { slug } = Astro.params;
const article = articlesData[slug as keyof typeof articlesData];

if (!article) {
  return Astro.redirect("/actualites");
}
---

<BaseLayout title={`${article.title} | VINDEX – Avocats`}>
  <Header />

  <main>
    <div class="hero-wrapper">
      <section class="article-hero">
        <div class="container">
          <div class="header-content">
            <div class="meta-row">
              <span class="category">{article.category}</span>
              <span class="separator">/</span>
              <time class="date">{article.date}</time>
            </div>
            <h1 class="article-title">{article.title}</h1>
          </div>
        </div>
      </section>
    </div>

    <!-- Article Content -->
    <article class="section-content">
      <div class="container--narrow">
        <div class="wysiwyg-content" set:html={article.content} />

        <div class="article-footer">
          <Button href="/actualites" variant="secondary" size="md">
            <ArrowLeft size={18} class="inline mr-2" /> Retour au Mag
          </Button>
        </div>
      </div>
    </article>

    <div class="footer-wrapper">
      <FinalCTA />
      <Footer />
    </div>
  </main>
</BaseLayout>

<style>
  .container {
    max-width: 1440px;
    margin: 0 auto;
    width: 100%;
  }

  .hero-wrapper {
    background-color: #08110f;
    color: #ffffff;
    padding-top: 80px;
  }

  .article-hero {
    padding: 128px 24px;
  }

  .header-content {
    max-width: 900px;
  }

  .meta-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 32px;
    font-family: var(--font-sans);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .category {
    color: var(--color-primary);
    font-weight: 600;
  }

  .separator {
    color: rgba(255, 255, 255, 0.2);
  }

  .date {
    color: rgba(255, 255, 255, 0.4);
  }

  .article-title {
    font-family: var(--font-heading);
    font-size: clamp(2.5rem, 6vw, 4rem);
    line-height: 1.1;
    font-weight: 500;
  }

  .section-content {
    padding: 128px 24px;
    background-color: #ffffff;
  }

  .container--narrow {
    max-width: 720px;
    margin: 0 auto;
  }

  /* WYSIWYG Styling */
  .wysiwyg-content {
    font-family: var(--font-serif);
    font-size: 1.25rem;
    line-height: 1.8;
    color: rgba(var(--color-text-main-rgb), 0.85);
  }

  .wysiwyg-content :global(p) {
    margin-bottom: 32px;
  }

  .wysiwyg-content :global(h2) {
    font-family: var(--font-heading);
    font-size: 2rem;
    font-weight: 500;
    margin: 64px 0 32px;
    color: var(--color-text-main);
    line-height: 1.2;
  }

  .wysiwyg-content :global(h2:first-child) {
    margin-top: 0;
  }

  .article-footer {
    margin-top: 80px;
    padding-top: 48px;
    border-top: 1px solid rgba(var(--color-text-main-rgb), 0.1);
  }

  .footer-wrapper {
    position: relative;
  }

  @media (max-width: 768px) {
    .article-hero {
      padding: 120px 16px 64px;
    }

    .article-title {
      font-size: 2.25rem;
    }

    .section-content {
      padding: 64px 16px;
    }

    .wysiwyg-content {
      font-size: 1.125rem;
    }

    .wysiwyg-content :global(h2) {
      font-size: 1.5rem;
      margin: 48px 0 24px;
    }
  }
</style>
